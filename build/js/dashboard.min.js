function dateToString(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e.getMonth(),n=e.getDate(),i=((""+a).length<2,""+t[a]+" ");return i+=((""+n).length<2?"0":"")+n+" ",i+=e.getFullYear()}function getDate(){var e=new Date,t="";t+=dateToString(e);var a=$("<h1/>");a.append(t),$("#currentDate").replaceWith(a)}function startTime(){var e=new Date,t=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),i="AM";t>12&&(i="PM",t-=12),a=checkTime(a),n=checkTime(n),document.getElementById("txt").innerHTML="Current Time: "+t+":"+a+":"+n+" "+i,setTimeout(function(){startTime()},500)}function checkTime(e){return 10>e&&(e="0"+e),e}function table(){var e,t;$.get("/api/employee/54ecaa24fb4974129dc2050d/appointments/today",function(a){var n=0;$("#tblBody").empty();for(var i=0;i<a.length;i++){var r=$('<img id="Image" src="http://placehold.it/50x50" />');n++;var o,c=new Date(a[i].date),s=c.getHours();if(1>s/12){var l=("0"+c.getHours()).slice(-2),p=("0"+c.getMinutes()).slice(-2);o=l+":"+p+" AM"}else{var u=c.getHours()%12;0===u&&(u=12);var d=("0"+u).slice(-2),m=("0"+c.getMinutes()).slice(-2);o=d+":"+m+" PM"}if("checkedIn"===a[i].state||"roomed"===a[i].state||"done"===a[i].state){var g="/viewform/"+a[i]._id,f=$('<a href="'+g+'" onclick="window.open(\''+g+"', 'newwindow', 'width=600, height=400'); return false;\" >View Forms</a>");if("checkedIn"===a[i].state){var h=$('<input type="checkbox">').data("appid",a[i]._id);h.change(function(){var e=$(this).data("appid");$.ajax({url:"/api/appointments/"+e+"/state",type:"PUT"})}),e=[n,a[i].fname+" "+a[i].lname,f,o,a[i].state,h,r]}else if("roomed"===a[i].state){t=$('<button class="btn btn-primary"><span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span></button>');var v=a[i]._id;t.click(function(){$.ajax({url:"/api/appointments/"+v+"/state",type:"PUT"})}),e=[n,a[i].fname+" "+a[i].lname,f,o,a[i].state,t,r]}else e=[n,a[i].fname+" "+a[i].lname,f,o,a[i].state,t=!1,r]}else e=[n,a[i].fname+" "+a[i].lname,t=!1,o,a[i].state,t=!1,r];insRow(e)}})}function poll(){setTimeout(function(){table(),poll()},1e3)}function insRow(e){for(var t=$("<tr/>"),a=0;a<e.length;a++){var n=$("<td/>");n.append(e[a]),t.append(n)}$("#tblBody").append(t)}$(function(){getDate(),$(startTime),$(table),$(poll)});